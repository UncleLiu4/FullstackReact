(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),u=(t(19),t(2)),l=function(e){var n=e.searchText,t=e.handleSearch;return r.a.createElement("div",null,r.a.createElement("p",null,"filter shown with(buggy)"),r.a.createElement("input",{value:n,onChange:t}))},i=function(e){var n=e.newName,t=e.handleNameChange,a=e.newPhone,o=e.handlePhoneChange,c=e.addNewName;return r.a.createElement("form",{onSubmit:c},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n,onChange:t})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:a,onChange:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=function(e){var n=e.persons,t=e.delHandler;return r.a.createElement("div",null,n.map((function(e){return r.a.createElement("p",{key:e.id},e.name," ",e.number,r.a.createElement("button",{onClick:t,"data-id":e.id,"data-name":e.name},"delete"))})))},s=t(3),d=t.n(s),h="/api/persons",f=function(){return d.a.get(h).then((function(e){return e.data}))},g=function(e){return d.a.post(h,e).then((function(e){return e.data}))},p=function(e){return d.a.delete("".concat(h,"/").concat(e)).then((function(e){return e}))},E=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),s=Object(u.a)(c,2),d=s[0],h=s[1],E=Object(a.useState)(""),b=Object(u.a)(E,2),v=b[0],w=b[1],j=Object(a.useState)(""),C=Object(u.a)(j,2),O=C[0],S=C[1],N=Object(a.useState)({msg:"",isError:!1}),k=Object(u.a)(N,2),y=k[0],x=k[1];Object(a.useEffect)((function(){f().then((function(e){return o(e)})).catch((function(e){return console.log("err",e)}))}),[]);var P=function(e){x(e),setTimeout((function(){x({msg:"",isError:!1})}),5e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(l,{searchText:O,handleSearch:function(e){var n=e.target.value;S(n),""!==n&&o(t.filter((function(e){return e.name.toUpperCase().includes(O.toUpperCase())})))}}),r.a.createElement((function(e){var n=e.message,t=n.msg,a={color:n.isError?"red":"green",backgroundColor:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return""===t?null:r.a.createElement("div",{style:a},t)}),{message:y}),r.a.createElement("h2",null,"Add a new note"),r.a.createElement(i,{newName:d,handleNameChange:function(e){return h(e.target.value)},newPhone:v,handlePhoneChange:function(e){return w(e.target.value)},addNewName:function(e){e.preventDefault(),g({name:d,number:v}).then((function(e){P({msg:"Added ".concat(e.name),isError:!1}),o(t.concat(e))})).catch((function(e){console.log("err\n",e.response),P({msg:e.response.data.error,isError:!0})})),h(""),w("")}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(m,{persons:t,delHandler:function(e){var n=e.target.dataset,a=window.confirm("Delete ".concat(n.name," ?")),r=n.name;if(a){var c=n.id;p(c).then((function(e){var n=t.filter((function(e){return e.id!==c}));o(n)})).catch((function(e){console.log("del err",e),P({msg:"".concat(r," has already been removed from server"),isError:!0})}))}}}))};c.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.a8e99fa0.chunk.js.map